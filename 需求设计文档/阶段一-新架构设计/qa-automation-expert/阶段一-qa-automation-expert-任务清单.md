# 阶段一 - 测试专家（qa-automation-expert）任务清单

> 目标：围绕 PCB 编辑器的核心流程、几何与命中、文件一致性和性能，集中整理可自动化的测试任务。

## 0. 关联设计文档

- [00-架构总览与模块划分](../00-架构总览与模块划分.md)
- [02-核心数据与文件系统-详细设计](../02-核心数据与文件系统-详细设计.md)
- [03-图形内核与算法-详细设计](../03-图形内核与算法-详细设计.md)
- [05-历史记录系统-详细设计](../05-历史记录系统-详细设计.md)
- [06-属性系统与数据绑定-详细设计](../06-属性系统与数据绑定-详细设计.md)
- [07-图形内核-几何算法库-详细设计](../07-图形内核-几何算法库-详细设计.md)
- [EDA-阶段一-需求与任务分发](../EDA-阶段一-需求与任务分发.md)

---

## 1. PCB 核心流程自动化用例

1. 设计端到端场景用例：
   - 新建 PCB → 设置板框与层堆栈 → 放置若干 Footprint → 布线 + 放 Via → 修改属性 → 撤销/重做 → 保存/加载；
2. 为上述场景设计自动化脚本：
   - 明确每一步的输入动作（鼠标/键盘/命令）与期望结果；
   - 定义断言点（画布状态、属性面板值、文件内容等）。

## 2. 几何与命中测试

1. 单元测试：
   - 点到 Track/Pad/Via 的命中检测；
   - 网格吸附行为；
   - 框选结果正确性（包含/排除边界情况）。
2. 路由边界测试：
   - 检查 Track 与板框关系（不出界）；
   - 对高密度走线区域进行命中与吸附稳定性测试。

## 3. 文件与行文本一致性

1. PCB 文档级回环测试：
   - PcbDocument → encode → decode → PcbDocument；
   - 校验实体数量、关键字段与拓扑关系不变。
2. 行文本级回环测试：
   - 针对每类实体（FOOTPRINT/TRACK/VIA/...）：
     - JSON → 行文本 → JSON；
   - 校验 encode/decode 的互逆性。

## 4. 属性系统与命令链路测试

1. 设计属性读写测试：
   - 单选/多选不同实体类型；
   - 修改几何类、电气类属性；
   - 校验属性变更是否正确生成命令并进入历史记录。
2. 验证属性验证失败路径：
   - 输入非法值（如线宽过小、孔径不合法）；
   - 确认错误提示与回滚行为符合设计。

## 5. 撤销/重做与时间线稳定性

1. 编写针对 HistoryManager 的自动化用例：
   - 多步撤销/重做；
   - 命令合并（例如连续移动）；
   - 在复杂场景下反复撤销/重做验证状态一致性。

## 6. 性能与交互体验

1. 构造中等规模 PCB 测试数据集：
   - 数百 Footprint、数千 Track/Via；
2. 度量并记录：
   - 平移/缩放/框选/撤销重做的响应时间；
   - 画布渲染 FPS 或帧耗时；
3. 给出阶段一的性能基线与告警阈值建议。

## 7. 测试基础设施与报告

1. 与开发对齐可用的测试框架与工具链；
2. 设计测试用例组织结构（按模块/按场景）；
3. 定义自动化测试的报告格式与关键指标（通过率、覆盖率、性能趋势）。


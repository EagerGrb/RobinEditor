# 阶段一交互调研与规范

## 调研范围与结论摘要

- 参考范式：AutoCAD、Figma、Excalidraw、Konva 交互模型
- 交互方向：以工具模式驱动，减少误操作
- 核心判断：绘制与编辑必须强区分，否则学习成本高

## 关键交互规范

### 工具与模式

- 绘制、选择、尺寸、门窗为独立模式
- 模式切换必须可见且可撤回
- ESC 退出当前模式，回到选择模式

### 选择与高亮

- 悬停高亮，选中高亮，差异化颜色
- 选中后显示可拖拽控制柄
- 多选采用框选方式，支持 shift 追加

### 绘制与编辑

- 连续绘制优先，减少反复切换
- 拖拽移动时显示对齐辅助线
- 拖拽过程中实时显示长度与角度

### 吸附与约束

- 吸附分为端点、网格、墙线
- 吸附提示使用视觉点与提示线
- 吸附阈值随缩放等级动态变化

### 尺寸标注

- 自动标注与手动标注共存
- 自动标注可关闭，避免视觉噪音
- 尺寸文字在缩放后依然清晰

### 视图操作

- 缩放以指针为中心，减少跳动感
- 平移支持空格键或中键拖动
- 视图复位一键完成

## 交互边界与异常处理

- 门窗放置必须落在墙体线段范围内
- 非法墙体闭合应提示并阻止保存
- 尺寸标注不得遮挡关键构件

## 可用性原则

- 低误触：绘制与选择隔离
- 低学习：快捷键与 UI 提示统一
- 高可见：吸附、选中、测量明确

## 交互风险与缓解

- 模式混淆导致误操作
  - 通过明显状态栏提示与快捷键回退
- 过度吸附导致精度下降
  - 提供吸附开关与按住快捷键临时取消
